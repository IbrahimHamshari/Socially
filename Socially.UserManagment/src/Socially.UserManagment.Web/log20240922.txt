2024-09-22 00:04:11.365 +03:00 [INF] Executed DbCommand (167ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:04:11.830 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:04:12.100 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:04:12.861 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:04:12.885 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:04:12.890 +03:00 [INF] Hosting environment: Development
2024-09-22 00:04:12.892 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:04:13.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:04:14.257 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 634.0357ms
2024-09-22 00:04:14.360 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:04:14.360 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:04:14.371 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 11.3198ms
2024-09-22 00:04:14.394 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 35.2763ms
2024-09-22 00:04:14.404 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:04:14.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.1289ms
2024-09-22 00:04:15.404 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:04:15.708 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 304.7156ms
2024-09-22 00:04:29.521 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:04:29.796 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:04:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:04:29.828 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:04:29'.
2024-09-22 00:04:29.834 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:04:29.865 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:04:29.951 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:04:29.957 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:04:30.457 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:04:30.491 +03:00 [INF] Handled RegisterUserCommand with Ardalis.Result.Result`1[System.Guid] in 521 ms
2024-09-22 00:04:30.509 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Guid'.
2024-09-22 00:04:30.560 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 684.2379ms
2024-09-22 00:04:30.564 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:04:30.576 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 201 null application/json; charset=utf-8 1055.7054ms
2024-09-22 00:06:01.246 +03:00 [INF] Executed DbCommand (157ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:06:01.645 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:06:01.855 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:06:02.084 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:06:02.329 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:06:02.332 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:06:02.334 +03:00 [INF] Hosting environment: Development
2024-09-22 00:06:02.335 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:06:03.248 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:06:03.704 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 465.1719ms
2024-09-22 00:06:03.841 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:06:03.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:06:03.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:06:03.871 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 39.2322ms
2024-09-22 00:06:03.893 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 62.2099ms
2024-09-22 00:06:03.986 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 116.5387ms
2024-09-22 00:06:05.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:06:05.259 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.8273ms
2024-09-22 00:06:06.121 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:06:06.418 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:06:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:06:06.428 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:06:06'.
2024-09-22 00:06:06.436 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:06:06.480 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:06:06.603 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:06:06.620 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:06:07.173 +03:00 [INF] Executed DbCommand (113ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:06:07.216 +03:00 [INF] Handled RegisterUserCommand with Ardalis.Result.Result`1[System.Guid] in 576 ms
2024-09-22 00:06:07.241 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Guid'.
2024-09-22 00:06:07.284 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 791.0709ms
2024-09-22 00:06:07.286 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:06:07.300 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 201 null application/json; charset=utf-8 1179.6944ms
2024-09-22 00:07:15.835 +03:00 [INF] Executed DbCommand (180ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:07:16.280 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:07:16.513 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:07:16.685 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:07:16.940 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:07:16.943 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:07:16.945 +03:00 [INF] Hosting environment: Development
2024-09-22 00:07:16.947 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:07:17.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:07:18.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 273.4787ms
2024-09-22 00:07:18.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:07:18.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:07:18.277 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 12.3928ms
2024-09-22 00:07:18.294 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 29.8375ms
2024-09-22 00:07:18.306 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:07:18.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.9783ms
2024-09-22 00:07:19.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:07:19.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.4144ms
2024-09-22 00:07:26.009 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:07:26.269 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:07:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:07:26.285 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:07:26'.
2024-09-22 00:07:26.296 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:07:26.339 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:07:26.466 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:07:26.478 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:07:40.851 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:09:38.583 +03:00 [INF] Executed DbCommand (155ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:09:39.101 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:09:39.254 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:09:39.445 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:09:39.447 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:09:39.449 +03:00 [INF] Hosting environment: Development
2024-09-22 00:09:39.453 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:09:40.471 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:09:40.718 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 251.8429ms
2024-09-22 00:09:40.776 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:09:40.776 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:09:40.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:09:40.798 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 22.395ms
2024-09-22 00:09:40.848 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 71.8226ms
2024-09-22 00:09:40.953 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 166.9467ms
2024-09-22 00:09:42.274 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:09:42.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.5972ms
2024-09-22 00:10:06.845 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:10:07.030 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:10:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:10:07.056 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:10:07'.
2024-09-22 00:10:07.062 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:10:07.095 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:10:07.180 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:10:07.185 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:10:23.187 +03:00 [ERR] Failed executing DbCommand (123ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:10:23.233 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Socially.UserManagment.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-22 00:10:23.523 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 16417.749ms
2024-09-22 00:10:23.532 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:10:23.544 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 30
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 00:10:23.620 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 16774.6964ms
2024-09-22 00:10:51.789 +03:00 [INF] Executed DbCommand (142ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:10:52.155 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:10:52.334 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:10:52.496 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:10:52.710 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:10:52.714 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:10:52.716 +03:00 [INF] Hosting environment: Development
2024-09-22 00:10:52.717 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:10:53.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:10:53.452 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 264.8997ms
2024-09-22 00:10:53.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:10:53.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:10:53.526 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:10:53.593 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 68.6465ms
2024-09-22 00:10:53.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 103.1048ms
2024-09-22 00:10:53.719 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 194.0015ms
2024-09-22 00:10:54.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:10:54.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 384.283ms
2024-09-22 00:10:57.967 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:10:58.247 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:10:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:10:58.262 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:10:58'.
2024-09-22 00:10:58.274 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:10:58.308 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:10:58.408 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:10:58.420 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:11:13.860 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:13:23.402 +03:00 [INF] Handled RegisterUserCommand with Ardalis.Result.Result`1[System.Guid] in 144963 ms
2024-09-22 00:18:01.125 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:18:01.352 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:18:01.445 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:18:01.521 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:18:01.617 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:18:01.619 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:18:01.621 +03:00 [INF] Hosting environment: Development
2024-09-22 00:18:01.621 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:18:02.075 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:18:02.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 117.5153ms
2024-09-22 00:18:02.282 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:18:02.289 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 7.2698ms
2024-09-22 00:18:02.331 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:18:02.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 11.516ms
2024-09-22 00:18:02.367 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:18:02.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.2211ms
2024-09-22 00:18:02.828 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:18:02.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.9225ms
2024-09-22 00:18:35.621 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:18:35.721 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:18:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:18:35.725 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:18:35'.
2024-09-22 00:18:35.730 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:18:35.749 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:18:35.798 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:18:35.803 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:18:55.106 +03:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:18:55.352 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:18:55.460 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:18:55.552 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:18:55.667 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:18:55.669 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:18:55.669 +03:00 [INF] Hosting environment: Development
2024-09-22 00:18:55.670 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:18:56.094 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:18:56.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 146.4624ms
2024-09-22 00:18:56.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:18:56.306 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:18:56.312 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 9.0724ms
2024-09-22 00:18:56.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:18:56.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 26.5272ms
2024-09-22 00:18:56.373 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.1883ms
2024-09-22 00:18:56.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:18:57.053 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 114.2945ms
2024-09-22 00:19:03.614 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:19:03.745 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:19:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:19:03.749 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:19:03'.
2024-09-22 00:19:03.753 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:19:03.767 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:19:03.810 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:19:03.813 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:19:18.249 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:19:18.465 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:19:18.555 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:19:18.634 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:19:18.725 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:19:18.727 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:19:18.728 +03:00 [INF] Hosting environment: Development
2024-09-22 00:19:18.729 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:19:18.940 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:19:19.060 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 123.0798ms
2024-09-22 00:19:19.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:19:19.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:19:19.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 5.9265ms
2024-09-22 00:19:19.105 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:19:19.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 10.7666ms
2024-09-22 00:19:19.156 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.4461ms
2024-09-22 00:19:19.506 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:19:19.632 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.1239ms
2024-09-22 00:19:21.577 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:19:21.656 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:19:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:19:21.662 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:19:21'.
2024-09-22 00:19:21.665 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:19:21.678 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:19:21.718 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:19:21.722 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:20:33.308 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:20:33.528 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:20:33.629 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:20:33.710 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:20:33.802 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:20:33.803 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:20:33.804 +03:00 [INF] Hosting environment: Development
2024-09-22 00:20:33.805 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:20:34.503 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:20:34.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 156.5272ms
2024-09-22 00:20:34.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:20:34.752 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 5.0734ms
2024-09-22 00:20:34.832 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:20:34.846 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 14.7419ms
2024-09-22 00:20:34.926 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:20:34.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.1356ms
2024-09-22 00:20:35.385 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:20:35.497 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 112.1456ms
2024-09-22 00:20:39.311 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:20:39.395 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:20:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:20:39.400 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:20:39'.
2024-09-22 00:20:39.404 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:20:39.419 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:20:39.459 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:20:39.462 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:21:06.991 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:21:07.206 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:21:07.301 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:21:07.383 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:21:07.523 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:21:07.525 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:21:07.526 +03:00 [INF] Hosting environment: Development
2024-09-22 00:21:07.527 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:21:08.338 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:21:08.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 120.2717ms
2024-09-22 00:21:08.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:21:08.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 3.0937ms
2024-09-22 00:21:08.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:21:08.613 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 14.3056ms
2024-09-22 00:21:08.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:21:08.688 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.4245ms
2024-09-22 00:21:09.110 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:21:09.182 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.0762ms
2024-09-22 00:21:13.633 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:21:13.714 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:21:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:21:13.719 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:21:13'.
2024-09-22 00:21:13.724 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:21:13.740 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:21:13.782 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:21:13.786 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:21:35.547 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:30:31.972 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:30:32.205 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:30:32.306 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:30:32.441 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:30:32.442 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:30:32.443 +03:00 [INF] Hosting environment: Development
2024-09-22 00:30:32.444 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:30:33.467 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:30:33.639 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 167.652ms
2024-09-22 00:30:33.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:30:33.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:30:33.843 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:30:33.881 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 211.1301ms
2024-09-22 00:30:33.896 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 225.779ms
2024-09-22 00:30:34.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 306.732ms
2024-09-22 00:30:34.550 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:30:34.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.363ms
2024-09-22 00:30:38.771 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:30:38.877 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:30:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:30:38.891 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:30:38'.
2024-09-22 00:30:38.895 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:30:38.911 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:30:38.954 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:30:38.958 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:30:49.816 +03:00 [ERR] Failed executing DbCommand (97ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:30:49.834 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Socially.UserManagment.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-22 00:30:50.134 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 11218.5395ms
2024-09-22 00:30:50.137 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:30:50.142 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 30
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 00:30:50.201 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 11430.5ms
2024-09-22 00:31:35.522 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:31:35.526 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:31:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:31:35.528 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:31:35'.
2024-09-22 00:31:35.529 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:31:35.531 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:31:35.534 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:31:35.535 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:31:39.851 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:31:40.964 +03:00 [INF] Handled RegisterUserCommand with Ardalis.Result.Result`1[System.Guid] in 5422 ms
2024-09-22 00:31:43.646 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Guid'.
2024-09-22 00:31:43.691 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 8157.8587ms
2024-09-22 00:31:43.693 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:31:43.695 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 201 null application/json; charset=utf-8 8173.1905ms
2024-09-22 00:40:05.835 +03:00 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:40:06.088 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:40:06.200 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:40:06.306 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:40:06.431 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:40:06.433 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:40:06.434 +03:00 [INF] Hosting environment: Development
2024-09-22 00:40:06.435 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:40:07.072 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:40:07.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 193.2281ms
2024-09-22 00:40:07.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:40:07.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:40:07.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:40:07.303 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 10.9433ms
2024-09-22 00:40:07.303 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 11.3907ms
2024-09-22 00:40:07.354 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.8317ms
2024-09-22 00:40:07.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:40:07.768 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 85.5535ms
2024-09-22 00:40:12.048 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:40:12.230 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:40:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:40:12.239 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:40:12'.
2024-09-22 00:40:12.243 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:40:12.270 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:40:12.334 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:40:12.341 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:40:12.756 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:43:27.951 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Bio", u."CoverPhotoURL", u."CreatedAt", u."DateOfBirth", u."Email", u."FirstName", u."Gender", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."LastName", u."PasswordHash", u."ProfilePictureURL", u."ResetPasswordToken", u."ResetTokenGeneratedAt", u."TokenGeneratedAt", u."UpdatedAt", u."Username", u."VerificationToken"
FROM "Users" AS u
2024-09-22 00:45:31.457 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:45:31.730 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:45:31.835 +03:00 [ERR] An error occurred seeding the DB. The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
System.TypeInitializationException: The type initializer for 'Socially.UserManagment.Infrastructure.Data.SeedData' threw an exception.
 ---> System.ArgumentException: Input passwordHash was not in required format (Parameter 'passwordHash')
   at Ardalis.GuardClauses.GuardClauseExtensions.InvalidFormat(IGuardClause guardClause, String input, String parameterName, String regexPattern, String message, Func`1 exceptionCreator)
   at Ardalis.GuardClauses.UserGuardExtension.InvalidPasswordFormat(IGuardClause guardClause, String password, String parameterName) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Guards\UserGuardExtension.cs:line 17
   at Socially.UserManagement.Core.UserAggregate.User..ctor(String username, String email, String passwordHash, String firstName, String lastName, Boolean gender) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\User.cs:line 39
   at Socially.UserManagment.Infrastructure.Data.SeedData..cctor() in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 8
   --- End of inner exception stack trace ---
   at Socially.UserManagment.Infrastructure.Data.SeedData.PopulateTestDataAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 20
   at Socially.UserManagment.Infrastructure.Data.SeedData.InitializeAsync(AppDbContext dbContext) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\SeedData.cs:line 15
   at Program.<<Main>$>g__SeedDatabase|0_3(WebApplication app) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Program.cs:line 125
2024-09-22 00:45:31.923 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:45:32.031 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:45:32.032 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:45:32.034 +03:00 [INF] Hosting environment: Development
2024-09-22 00:45:32.035 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:45:32.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:45:32.585 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 207.0544ms
2024-09-22 00:45:32.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:45:32.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:45:32.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:45:32.635 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 11.57ms
2024-09-22 00:45:32.746 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 121.7157ms
2024-09-22 00:45:32.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 145.9062ms
2024-09-22 00:45:33.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:45:33.135 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.7989ms
2024-09-22 00:45:35.480 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:45:35.561 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:45:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:45:35.572 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:45:35'.
2024-09-22 00:45:35.579 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:45:35.597 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:45:35.636 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:45:35.640 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:45:35.892 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:51:34.813 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 00:51:35.073 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 00:51:35.185 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 00:51:35.341 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 00:51:35.343 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 00:51:35.344 +03:00 [INF] Hosting environment: Development
2024-09-22 00:51:35.346 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 00:51:36.004 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 00:51:36.128 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 129.3159ms
2024-09-22 00:51:36.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 00:51:36.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 00:51:36.349 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 186.3193ms
2024-09-22 00:51:36.166 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 00:51:36.365 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 202.0365ms
2024-09-22 00:51:36.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 238.4206ms
2024-09-22 00:51:36.602 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 00:51:36.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 259.7835ms
2024-09-22 00:51:38.830 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:51:38.935 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:51:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:51:39.044 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:51:38'.
2024-09-22 00:51:39.048 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:51:39.065 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:51:39.108 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:51:39.112 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:51:39.353 +03:00 [ERR] Failed executing DbCommand (86ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:51:39.368 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Socially.UserManagment.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-22 00:51:39.493 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 422.3574ms
2024-09-22 00:51:39.496 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:51:39.499 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 30
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 00:51:39.536 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 706.105ms
2024-09-22 00:51:51.974 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:51:51.980 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:51:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:51:51.982 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:51:51'.
2024-09-22 00:51:51.983 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:51:51.984 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:51:51.987 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:51:51.988 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:51:52.129 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:51:52.605 +03:00 [WRN] Sending email to lomesethdev@gmail.com with subject Account Registeration using Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.
2024-09-22 00:51:57.989 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 6002.8921ms
2024-09-22 00:51:57.993 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:51:57.995 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.ServiceNotAuthenticatedException: 5.7.57 Client not authenticated to send mail. [TL2P290CA0021.ISRP290.PROD.OUTLOOK.COM 2024-09-21T21:51:56.834Z 08DCD9CBAD8F5925]
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.SendEmailAsync(String to, String subject, String body) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Email\MimeKitEmailSender.cs:line 34
   at Socially.UserManagment.UseCases.Users.Handlers.UserCreatedEventHandler.Handle(UserCreatedEvent domainEvent, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Handlers\UserCreatedEventHandler.cs:line 39
   at MediatR.NotificationPublishers.ForeachAwaitPublisher.Publish(IEnumerable`1 handlerExecutors, INotification notification, CancellationToken cancellationToken)
   at Ardalis.SharedKernel.MediatRDomainEventDispatcher.DispatchAndClearEvents[TId](IEnumerable`1 entitiesWithEvents)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 41
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 00:51:58.028 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 6053.4078ms
2024-09-22 00:54:45.018 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:54:45.022 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:54:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:54:45.024 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:54:45'.
2024-09-22 00:54:45.025 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:54:45.026 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:54:45.029 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:54:45.030 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:54:45.127 +03:00 [ERR] Failed executing DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:54:45.131 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Socially.UserManagment.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-22 00:54:45.213 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 185.1635ms
2024-09-22 00:54:45.214 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:54:45.216 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 30
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 00:54:45.231 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 213.0216ms
2024-09-22 00:54:54.852 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 00:54:54.855 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:54:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 00:54:54.857 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 21:54:54'.
2024-09-22 00:54:54.858 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:54:54.859 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 00:54:54.861 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 00:54:54.862 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 00:54:54.955 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 00:54:54.959 +03:00 [WRN] Sending email to lomesethdev@gmail.com with subject Account Registeration using Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.
2024-09-22 00:55:00.173 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 5312.6914ms
2024-09-22 00:55:00.176 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 00:55:00.178 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.ServiceNotAuthenticatedException: 5.7.57 Client not authenticated to send mail. [TL0P290CA0004.ISRP290.PROD.OUTLOOK.COM 2024-09-21T21:54:59.076Z 08DCD9CCDB2F5E77]
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.SendEmailAsync(String to, String subject, String body) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Email\MimeKitEmailSender.cs:line 34
   at Socially.UserManagment.UseCases.Users.Handlers.UserCreatedEventHandler.Handle(UserCreatedEvent domainEvent, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Handlers\UserCreatedEventHandler.cs:line 39
   at MediatR.NotificationPublishers.ForeachAwaitPublisher.Publish(IEnumerable`1 handlerExecutors, INotification notification, CancellationToken cancellationToken)
   at Ardalis.SharedKernel.MediatRDomainEventDispatcher.DispatchAndClearEvents[TId](IEnumerable`1 entitiesWithEvents)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 41
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 00:55:00.187 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 5335.0845ms
2024-09-22 01:01:22.015 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 01:01:22.018 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:01:22'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 01:01:22.022 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:01:22'.
2024-09-22 01:01:22.023 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:01:22.024 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 01:01:22.027 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 01:01:22.028 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 01:01:22.600 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 01:01:22.604 +03:00 [WRN] Sending email to lomesethdev@gmail.com with subject Account Registeration using Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.
2024-09-22 01:01:27.854 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 5827.7099ms
2024-09-22 01:01:27.855 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:01:27.857 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.ServiceNotAuthenticatedException: 5.7.57 Client not authenticated to send mail. [TL2P290CA0018.ISRP290.PROD.OUTLOOK.COM 2024-09-21T22:01:26.741Z 08DCD9B520940661]
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, CancellationToken cancellationToken, ITransferProgress progress)
   at Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.SendEmailAsync(String to, String subject, String body) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Email\MimeKitEmailSender.cs:line 34
   at Socially.UserManagment.UseCases.Users.Handlers.UserCreatedEventHandler.Handle(UserCreatedEvent domainEvent, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Core\UserAggregate\Handlers\UserCreatedEventHandler.cs:line 39
   at MediatR.NotificationPublishers.ForeachAwaitPublisher.Publish(IEnumerable`1 handlerExecutors, INotification notification, CancellationToken cancellationToken)
   at Ardalis.SharedKernel.MediatRDomainEventDispatcher.DispatchAndClearEvents[TId](IEnumerable`1 entitiesWithEvents)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 41
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 01:01:27.867 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 5851.5955ms
2024-09-22 01:02:51.611 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 01:02:51.613 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:02:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 01:02:51.615 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:02:51'.
2024-09-22 01:02:51.616 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:02:51.617 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 01:02:51.619 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 01:02:51.620 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 01:02:51.711 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 01:02:51.720 +03:00 [WRN] Sending email to lomesethdev@gmail.com with subject Account Registeration using Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.
2024-09-22 01:03:05.716 +03:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2024-09-22 01:03:05.973 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u)
2024-09-22 01:03:06.068 +03:00 [INF] User profile is available. Using 'C:\Users\acer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-22 01:03:06.190 +03:00 [INF] Now listening on: https://localhost:57679
2024-09-22 01:03:06.192 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-22 01:03:06.194 +03:00 [INF] Hosting environment: Development
2024-09-22 01:03:06.195 +03:00 [INF] Content root path: C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web
2024-09-22 01:03:06.362 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 01:03:06.487 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:03:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 01:03:06.501 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:03:06'.
2024-09-22 01:03:06.505 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:03:06.521 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 01:03:06.570 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 01:03:06.574 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 01:03:06.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2024-09-22 01:03:06.803 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html;charset=utf-8 96.9171ms
2024-09-22 01:03:06.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - null null
2024-09-22 01:03:06.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.js - null null
2024-09-22 01:03:06.847 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.js - 200 null application/javascript;charset=utf-8 10.221ms
2024-09-22 01:03:06.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/_vs/browserLink - null null
2024-09-22 01:03:06.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_framework/aspnetcore-browser-refresh.js - 200 13788 application/javascript; charset=utf-8 24.136ms
2024-09-22 01:03:06.874 +03:00 [ERR] Failed executing DbCommand (86ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 01:03:06.894 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Socially.UserManagment.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-22 01:03:06.905 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.6208ms
2024-09-22 01:03:07.034 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 508.2827ms
2024-09-22 01:03:07.037 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:03:07.040 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 30
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 01:03:07.078 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 720.1557ms
2024-09-22 01:03:07.256 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2024-09-22 01:03:07.602 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 346.7654ms
2024-09-22 01:03:08.548 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 01:03:08.555 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:03:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 01:03:08.649 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:03:08'.
2024-09-22 01:03:08.650 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:03:08.651 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 01:03:08.657 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 01:03:08.658 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 01:03:08.795 +03:00 [ERR] Failed executing DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 01:03:08.801 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Socially.UserManagment.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-22 01:03:08.891 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 234.8235ms
2024-09-22 01:03:08.892 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:03:08.894 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Username"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Username"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Username
    File: nbtinsert.c
    Line: 664
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Socially.UserManagment.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Infrastructure\Data\AppDbContext.cs:line 30
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at Socially.UserManagment.UseCases.Users.Register.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.UseCases\Users\Register\RegisterUserCommandHandler.cs:line 18
   at Ardalis.SharedKernel.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Socially.UserManagment.Web.Users.UserController.Register(UserRegistrationDto newUser) in C:\Users\acer\source\repos\test\Socially.UserManagment\src\Socially.UserManagment.Web\Controllers\UserController.cs:line 40
   at lambda_method7(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-22 01:03:08.910 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 500 null text/plain; charset=utf-8 362.1772ms
2024-09-22 01:03:16.106 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/api/User/register - application/json 174
2024-09-22 01:03:16.112 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:03:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-09-22 01:03:16.114 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/09/2024 22:55:54', Current time (UTC): '21/09/2024 22:03:16'.
2024-09-22 01:03:16.116 +03:00 [INF] Executing endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:03:16.117 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] Register(Socially.UserManagment.UseCases.Users.Common.DTOs.UserRegistrationDto) on controller Socially.UserManagment.Web.Users.UserController (Socially.UserManagment.Web).
2024-09-22 01:03:16.120 +03:00 [INF] Handling RegisterUserCommand
2024-09-22 01:03:16.120 +03:00 [INF] Property User : {"Username":"testing123","Email":"lomesethdev@gmail.com","Password":"Testing@123","FirstName":"test1","LastName":"test2","Gender":false,"$type":"UserRegistrationDto"}
2024-09-22 01:03:16.217 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?', @p12='?', @p13='?', @p14='?', @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (DbType = DateTime), @p18='?', @p19='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "Bio", "CoverPhotoURL", "CreatedAt", "DateOfBirth", "Email", "FirstName", "Gender", "IsActive", "IsEmailVerified", "LastLoginAt", "LastName", "PasswordHash", "ProfilePictureURL", "ResetPasswordToken", "ResetTokenGeneratedAt", "TokenGeneratedAt", "UpdatedAt", "Username", "VerificationToken")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-09-22 01:06:40.674 +03:00 [WRN] Sent email to lomesethdev@gmail.com with subject Account Registeration using Socially.UserManagment.Infrastructure.Email.MimeKitEmailSender.
2024-09-22 01:06:42.441 +03:00 [INF] a Register Email has been sent to the user with Id of "347b081e-7c1f-4f43-9b23-f0bd9d2499d8"
2024-09-22 01:06:47.557 +03:00 [INF] Handled RegisterUserCommand with Ardalis.Result.Result`1[System.Guid] in 211431 ms
2024-09-22 01:06:53.540 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Guid'.
2024-09-22 01:06:53.595 +03:00 [INF] Executed action Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web) in 217476.2245ms
2024-09-22 01:06:53.598 +03:00 [INF] Executed endpoint 'Socially.UserManagment.Web.Users.UserController.Register (Socially.UserManagment.Web)'
2024-09-22 01:06:53.600 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/api/User/register - 201 null application/json; charset=utf-8 217494.2803ms
